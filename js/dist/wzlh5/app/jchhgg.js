/*! http://h.wozhongla.com 2015-03-30 14:35:56  */
!function(exports){function getSp(id,fn){$.ajax({url:spAPI+id,dataType:"jsonp",success:function(re2){var re={};$(re2).each(function(index,item){re[item.matchNo]={sp:item.sp}}),fn(re)},error:function(){fn({error:!0})}})}function queuedo(array,callback,next){var i=-1;this.loop=function(){i++,i==array.length?next():callback(array[i],this.loop)},this.loop()}var TZ_CONFIG="http://www.wozhongla.com/",jchhAPI=TZ_CONFIG+"slttz/preissue?method=jcMatch&lotoId=305",spAPI=TZ_CONFIG+"slttz/preissue?method=jcOdds&lotoId=",issueAPI=TZ_CONFIG+"slttz/preissue",Dialog=function(){function Dialog(opts){this.opts=opts,this._type="",this.tpls=_tpl(this.opts)}function extend(source,target){if(source)for(var key in source){var val=source[key];"undefined"!=typeof val&&(target[key]=val)}return target}function toString(object){return Object.prototype.toString.call(object)}function isObject(object){return"[object Object]"===toString(object)}var _lastDialog,_lastMask,_default={type:"default",message:"默认信息！",title:"我中啦提示您：",trigger:"",duration:120,autoHide:!1,autoHideDelay:1e3,classPrefix:"",haskMask:!0,maskClick:function(){},width:"",height:"",autoOpen:!1,column:!1,zindex:999,cancelText:"取消",confirmText:"确定",onConfirm:function(){},onCancel:function(){},afterHide:function(){},afterShow:function(){},select:[["是",function(){}],["否",function(){}],["取消",function(){}]],inputPlaceholder:"请输入",inputType:"text"},_tpl=function(opts){var selectButton=function(){for(var str="",i=0;i<opts.select.length;i++)str+='<div class="wzl-ui-dialog-confirm wzl-ui-dialog-operationitem"><a href="javascript:;" class="wzl-ui-dialog-button">'+opts.select[i][0]+"</a></div>";return str}(),wrapColumn=function(){var str=opts.column?'<div class="wzl-ui-dialog-operation column">':'<div class="wzl-ui-dialog-operation">';return str}(),button2=function(){var str=wrapColumn+'<div class="wzl-ui-dialog-confirm wzl-ui-dialog-operationitem"><a href="javascript:;" class="wzl-ui-dialog-button">'+opts.cancelText+'</a></div><div class="wzl-ui-dialog-confirm wzl-ui-dialog-operationitem"><a href="javascript:;" class="wzl-ui-dialog-button">'+opts.confirmText+"</a></div></div>";return str}(),button1=function(){var str=wrapColumn+'<div class="wzl-ui-dialog-confirm wzl-ui-dialog-operationitem"><a href="javascript:;" class="wzl-ui-dialog-button">'+opts.confirmText+"</a></div></div>";return str}(),input=function(){var str='<div class="wzl-ui-dialog-input"><input class="wzl-ui-dialog-inputcon" type="'+opts.inputType+'" placeholder="'+opts.inputPlaceholder+'"/></div>';return str}();return{wrapStart:'<div class="wzl-ui-dialog"><div class="wzl-ui-dialog-content" data-role="content">',wrapEnd:"</div></div>",containerStart:'<div class="wzl-ui-dialog-container">',containerEnd:"</div>",title:'<div class="wzl-ui-dialog-title">'+opts.title+"</div>",message:'<div class="wzl-ui-dialog-message">'+opts.message+"</div>",loading:'<div class="wzl-ui-dialog-message"><img src="../imgs/ui/ui-loading.gif" class="ui-loading" alt=""/> <p>'+opts.message+"</p></div>",input:input,buttonWrapStart:wrapColumn,buttonWrapEnd:"</div>",button2:button2,button1:button1,selectButton:selectButton,mask:'<div class="ui-mask" style="width:100%;height:100%;position:fixed;top:0;left:0;z-index:998"></div>'}},_timer={};Dialog.prototype._init=function(){var html,me=this,opts=me.opts,tpls=me.tpls;switch(html="",html+=tpls.wrapStart,opts.type){case"default":html+=tpls.title,html+=tpls.containerStart,html+=tpls.message,html+=tpls.containerEnd;break;case"input":html+=tpls.title,html+=tpls.containerStart,html+=tpls.message,html+=tpls.input,html+=tpls.button2,html+=tpls.containerEnd;break;case"loading":html+=tpls.title,html+=tpls.containerStart,html+=tpls.loading,html+=tpls.containerEnd;break;case"tips":html+=tpls.title,html+=tpls.containerStart,html+=tpls.message,html+=tpls.button1,html+=tpls.containerEnd;break;case"select":html+=tpls.title,html+=tpls.containerStart,html+=tpls.message,html+=tpls.button2,html+=tpls.containerEnd;break;default:html+=tpls.title,html+=tpls.message,me._type="default"}return html+=tpls.wrapEnd,opts.haskMask&&(me.$mask=$(tpls.mask).appendTo("body")),me.$msg=$(html).appendTo("body"),me.show(),me._event(),me},Dialog.prototype.show=function(){var me=this,opts=me.opts,$msg=me.$msg,$mask=me.$mask,winW=$(window).width(),winH=$(window).height(),theW=$msg.outerWidth(),theH=$msg.outerHeight(),winScrollTop=$(window).scrollTop(),pos={left:opts.position&&"undefined"!==opts.position.left?opts.position.left:(winW-theW)/2,top:opts.position&&"undefined"!==opts.position.top?opts.position.top:(winH-theH)/3+winScrollTop};pos.left<0&&(pos.left=0),pos.top<0&&(pos.top=0),pos.zIndex=opts.zindex,$msg.css(pos),$mask.css({width:winW,height:winH}),_lastDialog?_lastDialog.hide(function(){_lastMask.remove(),_lastDialog.remove(),$msg.fadeIn(opts.duration),_lastDialog=$msg,_lastMask=$mask}):(_lastDialog=$msg,_lastMask=$mask,$msg.fadeIn(opts.duration)),_timer&&clearTimeout(_timer),("default"==opts.type||"default"==me._type)&&(_timer=setTimeout(function(){me.hide()},opts.autoHideDelay||3e3))},Dialog.prototype.hide=function(cb){var me=this,opts=me.opts,$msg=me.$msg,$mask=me.$mask;_timer&&clearTimeout(_timer),_timer=0,$mask.hide(),$msg.stop(!0,!0).fadeOut(opts.duration,function(){opts.afterHide.apply(me),$msg.remove(),$mask.remove(),cb&&cb()})},Dialog.prototype._event=function(){var me=this,opts=me.opts;if("input"==opts.type){var _onConfirm=opts.onConfirm;opts.onConfirm=function(){var $input=me.$msg.find("input.wzl-ui-dialog-inputcon");_onConfirm(me,$input)}}"loading"==opts.type&&(me.ticket=function(v){me.$msg.find(".wzl-ui-dialog-message>p:first").html(v)}),"tips"==opts.type&&(opts.onCancel=opts.onConfirm),me.$msg.find(".wzl-ui-dialog-button").eq(0).on("click",function(){me.hide(opts.onCancel)}),me.$msg.find(".wzl-ui-dialog-button").eq(1).on("click",function(){me.hide(opts.onConfirm)})};var dialog=function(){for(var args=[],opts={},i=0;i<arguments.length;i++)args.push(arguments[i]);{var a1=args[0],a2=args[1];args[2],args[3]}switch(args.length){case 1:isObject(a1)?opts=a1:opts.message=a1;break;case 2:opts.type=a1,opts.message=a2}return new Dialog(extend(opts,_default))._init()};return dialog}(),TZ_INFO=function(info,fn){function needLogin(){dialog({type:"tips",message:s,onConfirm:function(){ref("login",location.pathname)}})}function needCz(){dialog({type:"tips",message:s,onConfirm:function(){ref("paycenter",location.pathname)},onCancel:function(){}})}function needInfo(){dialog({type:"tips",message:s,onConfirm:function(){ref("ucenter",location.pathname)}})}function commenError(){dialog({type:"tips",message:s,onConfirm:function(){location.reload()}})}function success(){dialog({type:"tips",message:s,onConfirm:function(){fn&&fn(info)}})}var s="投注异常",code=Number(info.resultCode),dialog=Dialog;switch(code){case 200:s="投注成功",success();break;case 300:s="投注失败",commenError();break;case 301:s="非法用户，投注信息已变更",commenError();break;case 302:s="重复提交",commenError();break;case 303:s="投注信息不完整",commenError();break;case 304:commenError();break;case 305:commenError();break;case 306:s="单场上传内容为空",commenError();break;case 307:s="投注期次未开售或已过期",commenError();break;case 308:s="解析票错误",commenError();break;case 309:s="用户未登录",needLogin();break;case 310:s="购票异常",commenError();break;case 311:s="用户信息不全，请补全。",needInfo();break;case 312:s="账户余额不足，充值请点击确认。",needCz();break;case 501:s="投注异常",commenError(s);break;case 510:s="投注失败，该彩种已停止投注",commenError();break;default:commenError()}var shref={login:"/views/login.html",index:"/index.html",ucenter:"/views/ucenter.html",paycenter:"/views/paycenter.html",ssq:"/views/ssq.html",dlt:"/views/dlt.html",jc:"/views/jc.html",jx11x5:"/views/jx11x5.html",ahk3:"/views/ahk3.html",fc3d:"/views/fc3d.html",pl3:"/views/pl3.html",ssc:"/views/ssc.html",cqssc:"/views/cqssc.html",pl5:"/views/pl5.html",qxc:"/views/qxc.html",qlc:"/views/qlc.html",accountdetail:"/views/accountdetail.html",bettingdetail:"/views/bettingdetail.html",bettingRecord:"/views/bettingRecord.html",bettingZH:"/views/bettingZH.html",savingscard:"/views/savingscard.html"},ref=function(url,backurl){function matchflat(u){var s=u.substring(u.lastIndexOf("/")+1,u.lastIndexOf("."));return s}location.href=backurl?shref[url]+"?ref="+matchflat(backurl):url}};exports.jchhggResoure={fetchAll:function(cb){function getAllSP(re,getSp){re.error?cb&&cb([]):queuedo(["301","320","302","303","304"],function(item,next){getSp(item,function(sp){var name="";switch(item){case"301":name="rqspf";break;case"320":name="spf";break;case"302":name="bf";break;case"303":name="jqs";break;case"304":name="sfbq"}for(var i in re)re[i][name]=sp[i]?sp[i].sp:[];next()})},function(){cb&&cb(re)})}$.ajax({type:"GET",url:jchhAPI,dataType:"jsonp",success:function(re1){var re={};$(re1).each(function(index,item){re[item.matchNo]=item}),getAllSP(re,getSp)},error:function(){getAllSP({error:!0})}})}};var getIssue=function(bei,fn){function merge(list){var r=[];return $(list).each(function(index,item){r.push({issue:item.issue,multiple:bei})}),r}var data={};data.lotoId=305,data.method="preissuenew",data.issues=1,$.ajax({type:"GET",url:issueAPI+"?callback=?",data:data,dataType:"json",success:function(re){var r=merge(re);fn&&fn(r)},error:function(){fn&&fn({status:!1})}})};exports.jshhggPost=function(data,fn){function getTzurl(url){try{return CarTz.getTzUrl(url)}catch(e){return url}}var dialog=Dialog;getIssue(data.bei,function(r){return r&&r.length?(data.lotoGson.issueArray=r,dialog("loading","正在投注！"),data.lotoGson=JSON.stringify(data.lotoGson),void $.ajax({method:"POST",data:data,url:getTzurl("/sltdc/tz"),success:function(re){TZ_INFO($.parseJSON(re),function(){fn&&fn({status:!0})})},error:function(re){TZ_INFO($.parseJSON(re),function(){fn&&fn({status:!1})})}})):dialog("投注异常，请重试")})}}(window);
/*! http://h.wozhongla.com 2015-03-30 14:35:56  */
!function(){function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)}var vueTouch={},Hammer="function"==typeof require?require("hammerjs"):window.Hammer,gestures=["tap","pan","pinch","press","rotate","swipe"],customeEvents={};vueTouch.install=function(Vue){Vue.directive("touch",{isFn:!0,acceptStatement:!0,bind:function(){this.el.hammer||(this.el.hammer=new Hammer.Manager(this.el));var recognizerType,recognizer,mc=this.mc=this.el.hammer,event=this.arg;if(customeEvents[event]){var custom=customeEvents[event];recognizerType=custom.type,recognizer=new(Hammer[capitalize(recognizerType)])(custom),recognizer.recognizeWith(mc.recognizers),mc.add(recognizer)}else{for(var i=0;i<gestures.length;i++)if(0===event.indexOf(gestures[i])){recognizerType=gestures[i];break}if(!recognizerType)return;recognizer=mc.get(recognizerType),recognizer||(recognizer=new(Hammer[capitalize(recognizerType)]),recognizer.recognizeWith(mc.recognizers),mc.add(recognizer))}},update:function(fn){var mc=this.mc,vm=this.vm,event=this.arg;this.handler&&mc.off(event,this.handler),this.handler=function(e){e.targetVM=vm,fn.call(vm,e)},mc.on(event,this.handler)},unbind:function(){this.mc.off(this.arg,this.handler),Object.keys(this.mc.handlers).length||(this.mc.destroy(),this.el.hammer=null)}})},vueTouch.registerCustomEvent=function(event,options){options.event=event,customeEvents[event]=options},"object"==typeof exports?module.exports=vueTouch:"function"==typeof define&&define.amd?define([],function(){return vueTouch}):window.Vue&&(window.VueTouch=vueTouch,Vue.use(vueTouch))}(),function(exports){Vue.config.debug=!0;var router,jchhggResoure=exports.jchhggResoure,jshhggPost=exports.jshhggPost;Array.isArray||(Array.isArray=function(vArg){return"[object Array]"===Object.prototype.toString.call(vArg)});var result=exports.app=new Vue({el:"#warp",data:{is_loading:!0,is_index:!1,is_match:!1,is_car:!1,is_bf:!1,is_success:!1,dropdown:!1,moredown:!1,is_chuan:!1,currentView:"",leagueId:0,leagueData:{},leagueList:{},filterKey:[],matchData:[],renderData:[],currentData:[],bf:{},bfCache:[],car:{},carTmpData:{},carTotal:{bei:1,gc:0,pc:0,gl:[],nc:0,bc:0,chuan:{},tuo:[],dan:[]},abc:[{hg:0},{hg:0},{hg:0}],arr7:[]},created:function(){this.$watch("currentView",function(){},!0)},filters:{filterLeague:function(value,key){function doFilter(name){return keys.some(function(elem){return name==elem})}var keys=this[key];return value=value.filter(Array.isArray(keys)?function(item){return keys&&"all"!=keys?doFilter(item.matchName.substring(0,4)):!0}:function(item){return keys&&"all"!=keys?item.filterType==keys||item.matchName.substring(0,4)==keys:!0})},filterListLength:function(value,key){function doFilter(name){return keys.some(function(elem){return name==elem})}var keys=this[key];return value=value.filter(Array.isArray(keys)?function(item){return keys&&"all"!=keys?doFilter(item.matchName.substring(0,4)):!0}:function(item){return keys&&"all"!=keys?item.filterType==keys||item.matchName.substring(0,4)==keys:!0}),value.length},filterMatchLength:function(value){return value.length},filterComityBall:function(comityBall){var c=parseInt(comityBall||this.bf.comityBall);return c>0?"+"+c:c}},components:{bfdialog:{inherit:!0,template:"#dialog-template",created:function(){},computed:{comityBall:function(){return this.comityBall>0?"+"+this.comityBall:"-"+this.comityBall}},filters:{filterComityBall:function(comityBall){var c=parseInt(comityBall||this.bf.comityBall);return c>0?"+"+c:c}},methods:{cancel:function(){this.is_bf=!1;for(var i=0;i<this.bfCache.length;i++)this.bf.r[this.bfCache[i]]=!1},submit:function(){this.is_bf=!1,this.bfCache=[]}}}},computed:{},watch:{car:"totalCar"},methods:{fetch_index:function(){var self=this;return self.renderData.length?(self.is_index=!self.is_index,self.is_loading=!self.is_index,self.is_car=!self.is_car,void(self.is_match=!1)):(self.is_match=!1,self.is_car=!1,self.is_loading=!0,void jchhggResoure.fetchAll(function(data){if(data){self.matchData=self.matchIndexData(data),self.is_index=!self.is_index,self.is_loading=!1;for(var i in self.leagueList)self.filterKey.push(i);for(var i=0;i<self.matchData.length;i++)self.carTmpData[self.matchData[i].matchNo]=self.matchData[i];self.currentData=self.renderData=self.matchDate(self.matchIndexData(data)),self.doIscroll()}else alert("%>_<%暂无数据，请稍后再查看！")}))},fetch_car:function(){var self=this;self.is_index=!1,self.is_car=!0,self.is_loading=!1,self.is_match=!1;var myScroll2;myScroll2=new IScroll("#carIscroll",{scrollbars:!0,mouseWheel:!0,click:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0})},matchDate:function(d){function seleteDate(re){function addDis(r){for(var j=0;j<r.length;j++)for(var h=0;h<r[j].list.length;h++)r[j].list[h].dis=""+[j]+"-list-"+[h];return r}for(var o={},r=[],d={},i=0;i<re.length;i++){var d=re[i].matchNo.substring(0,8);o[d]?o[d].push(re[i]):(o[d]=[],o[d].push(re[i]))}for(var n in o)o[n].length&&r.push({date:o[n][0].date.replace(/-/g,""),list:o[n]});return addDis(r)}var r=seleteDate(d);return r},matchIndexData:function(d){function setSp(origin,name,d){for(var i=0;i<d.length;i++)origin["sp"+name+i]=d[i],game.r["sp"+name+i]=!1}function matchType(origin,d){switch(d.filterType="",origin.matchName){case"英超":case"法甲":case"意甲":case"德甲":case"西甲":d.filterType="five"}(origin.spf[0]<=1.6||origin.spf[1]<=1.6||origin.spf[2]<=1.6||origin.rqspf[0]<=1.6||origin.rqspf[1]<=1.6||origin.rqspf[2]<=1.6)&&(d.filterType="hight")}function matchLeague(origin){if(leagueList[origin.matchName.substring(0,4)])origin.lid=leagueList[origin.matchName.substring(0,4)].id;else{var id=leagueId++;leagueList[origin.matchName.substring(0,4)]={},leagueList[origin.matchName.substring(0,4)].id=id,leagueList[origin.matchName.substring(0,4)].isShow=!0,origin.lid=leagueList[origin.matchName.substring(0,4)].id}}function getWeekDay(n){var arr=["","星期一","星期二","星期三","星期四","星期五","星期六","星期日"];return arr[n]}function checkTime(h){var d=new Date;d.setHours(h.substring(0,2),h.substring(2,4),0,0);var m=d.getTime(),nm=m-9e5,d2=new Date;d2.setTime(nm);var t=d2.getHours()+":"+d2.getMinutes();return t}var leagueList=this.leagueList,leagueId=this.leagueId,re=[];for(var i in d){var game={},item=d[i];game.r={},game.date=item.matchNo.substring(0,4)+"-"+item.matchNo.substring(4,6)+"-"+item.matchNo.substring(6,8),game.matchNo=item.matchNo,game.matchHome=item.matchHome,game.matchGuest=item.matchGuest,game.matchName=item.matchName,game.comityBall=item.comityBall,game.stopSaleTime=item.stopSaleTime,game.endTime=item.endTime,game.weekday=getWeekDay(item.matchNo.substring(8,9)),game.endtime=checkTime(item.stopSaleTime.substring(8,12)),game.leagueName=item.matchName.substring(0,4),game.changci=[item.matchNo.substring(8,9)]+item.matchNo.substring(9),game.changciStr=["","周一","周二","周三","周四","周五","周六","周日"][item.matchNo.substring(8,9)]+item.matchNo.substring(9),setSp(game,"Spf",item.spf),setSp(game,"Jq",item.jqs),setSp(game,"Bf",item.bf),setSp(game,"Rqspf",item.rqspf),setSp(game,"Bqc",item.sfbq),matchType(item,game),matchLeague(game),re.push(game)}var arr2=[],arr3=[];for(var i in re)"hight"==re[i].filterType?arr2.push(re[i]):"five"==re[i].filterType&&arr3.push(re[i]);var fd=this.abc;return fd[0].hg="高中奖率("+arr2.length+")",fd[1].hg="全部赛事("+re.length+")",fd[2].hg="五大联赛("+arr3.length+")",$("#jchh ul li").eq(1).addClass("active"),re},listToggle:function(index){$(index.$el).find("ul").toggle()},filterabc:function(m,n){var fs=m.substring(0,4);"全部赛事"==fs?this.matchall(n):"高中奖率"==fs?this.filterHight(n):"五大联赛"==fs&&this.filterFive(n)},filterFive:function(index){function onCompletion(){setTimeout(function(){myScroll.refresh(),myScroll.scrollTo(0,0,0)},0)}var self=this;self.addMatchType("five"),$(index.$el).addClass("active").siblings().removeClass("active"),onCompletion()},filterHight:function(index){function onCompletion(){setTimeout(function(){myScroll.refresh(),myScroll.scrollTo(0,0,0)},0)}this.addMatchType("hight"),$(index.$el).addClass("active").siblings().removeClass("active"),onCompletion()},filterLeague:function(league,me){this.leagueData[me.$key].isShow=!this.leagueData[me.$key].isShow,this.addMatchType(league)},toggleMatchBox:function(){this.leagueData=this.leagueList,this.is_index=!this.is_index,this.is_match=!this.is_match},matchAll:function(){var self=this,filterTmp=this.filterKey;for(var i in self.leagueData)filterTmp.indexOf(i)<0&&self.addMatchType(i)},matchall:function(index){function onCompletion(){setTimeout(function(){myScroll.refresh(),myScroll.scrollTo(0,0,0)},0)}this.addMatchType("all"),$(index.$el).addClass("active").siblings().removeClass("active"),onCompletion()},matchReverse:function(){var self=this;for(var i in self.leagueData)self.addMatchType(i)},doMatch:function(){function onCompletion(){setTimeout(function(){myScroll.refresh(),myScroll.scrollTo(0,0,0)},0)}this.is_index=!this.is_index,this.is_match=!this.is_match,onCompletion()},addMatchType:function(n){var filterTmp=this.filterKey,five=["英超","法甲","意甲","德甲","西甲"];if("five"==n){filterTmp=five;for(var i in this.leagueData)this.leagueData[i].isShow=!1;for(var n=0;n<five.length;n++)this.leagueData[five[n]]&&(this.leagueData[five[n]].isShow=!0)}else"all"==n||"hight"==n?filterTmp=n:(Array.isArray(filterTmp)||(filterTmp=[]),filterTmp.indexOf(n)<0?(filterTmp.push(n),this.leagueData[n].isShow=!0):(filterTmp.splice(filterTmp.indexOf(n),1),this.leagueData[n].isShow=!1));this.filterKey=filterTmp},toggleSPdialog:function(){this.is_bf=!this.is_bf,this.bfCache=[]},toggleBFDialog:function(me){{var pos=me.dis.split("-"),data=this.renderData[pos[0]][pos[1]][pos[2]];me.$el}if(this.is_bf=!0,this.bf=data,this.is_bf){var $h=$(window).height(),$w=$(window).width();$("#bf-block").css({height:$h-100,width:$w-20}),$("#bf-wrapper").css({height:$h-180,width:300,left:($w-20-300)/2});var bfScroll;bfScroll=new IScroll("#bf-wrapper",{scrollbars:!1,mouseWheel:!1,click:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0});var r=data.r;$("#bf-block li").removeClass("active");for(var i in r)1==r[i]&&$("#bf-block li[data-spitem="+i+"]").addClass("active")}},toggleSP:function(ev,me){function findLi(d){if(!d||"ul"==d.tagName.toLowerCase()||"p"==d.tagName.toLowerCase()||"div"==d.tagName.toLowerCase())return!1;for(;"li"!=d.tagName.toLowerCase();)d=d.parentNode;return d}var target=ev.target,targetLi=findLi(target);if(me=me||this.bf,$(target).hasClass("jc-select-span")||targetLi){var spitem=$(target).data("spitem")||$(targetLi).data("spitem");if(!me[spitem])return;me.r[spitem]=me.r[spitem]?!1:!0,this.toggleCar(me.dis,spitem),1==this.is_bf&&this.bfCache.push(spitem)}},toggleCar:function(no,item){var car=this.car;car[no]?car[no][item]?delete car[no][item]:car[no][item]=!0:(car[no]={},car[no][item]=!0),this.totalCar()},toggleCarList:function(ev){var self=this,target=ev.target,dis=ev.targetVM.dis,r=ev.targetVM.r;if($(target).hasClass("game-bet-box")){var spitem=$(target).data("spitem");self.toggleCar(dis,spitem),r[spitem]=!1}},totalCar:function(){function isEmpty(obj){var n;for(n in obj)return!1;return!0}function countTuo(list){for(var tuo=[],i=0;i<list.length;i++){var o={};o.n=list[i].dis,o.sps=[];for(var n in list[i].r)list[i].r[n]===!0&&o.sps.push(list[i][n]);o.maxSp=Math.max.apply(null,o.sps),o.minSp=Math.min.apply(null,o.sps),o.num=o.sps.length,tuo.push([o])}return tuo}function formatChuan(chuan){var r=[];for(var i in chuan)chuan[i]&&r.push(i);return r}var car=this.car,renderData=this.renderData,carTotal=this.carTotal,count=0;carTotal.gl=[];for(var i in car){var pos=i.split("-"),data=renderData[pos[0]][pos[1]][pos[2]];isEmpty(car[i])?delete car[i]:(count++,carTotal.gl.push(data))}isEmpty(carTotal.chuan)&&carTotal.gl.length>1&&(carTotal.chuan[carTotal.gl.length]=!0),carTotal.tuo=countTuo(carTotal.gl),carTotal.gc=count;var chuans=formatChuan(carTotal.chuan),totalSum=this.countUserSelect(chuans,countTuo(carTotal.gl));carTotal.nc=totalSum.item,carTotal.bc=(totalSum.maxWin*carTotal.bei).toFixed(2),carTotal.pc=carTotal.nc*carTotal.bei*2},removeCar:function(){var car=this.car,renderData=this.renderData;for(var i in car){var pos=i.split("-"),data=renderData[pos[0]][pos[1]][pos[2]];for(var n in data.r)data.r[n]=!1}this.car={},this.totalCar()},removeSelect:function(index,r,dis){var renderData=this.renderData,pos=dis.split("-"),data=renderData[pos[0]][pos[1]][pos[2]];for(var i in data.r)data.r[i]=!1;this.carTotal.gl.splice(index,1),delete this.car[dis],this.totalCar()},countUserSelect:function(chuan,tuo){function totalSum(dan,chuan,tuo){function eachArray(arr,num){for(var t=[[]],r=[],i=0,n=arr.length;n>i;i++)for(var j=0,k=t.length;k>j;j++){var ss=t[j].concat([arr[i]]);ss.length<num?t.push(ss):r.push(ss)}return r}function cl(a){function allArr(arr,n){if(n>=arr.length)array.push(code.slice()),code.length=n-1;else{for(var i=0,j=arr[n].length;j>i;i++)code.push(arr[n][i]),allArr(arr,n+1);n&&(code.length=n-1)}}var n=0,array=[],code=[];return allArr(a,n),array}function multiplyCount(arr,flag){var a=1;if(0==arr.length)return 0;for(var i=0,l=arr.length;l>i;i++)a*=flag?arr[i].maxSp:arr[i].num;return a}for(var count=0,maxPrice=0,gg=chuan,tuo=tuo,dan=dan,isShowhh=!1,i=0;i<gg.length;i++){var chuanN=[gg[i]],fs=[chuanN[0]],guoguan_num=chuanN[0],array="",arr=[],dan_lenth=dan.length;if(dan_lenth>0){var danArray=[];if(dan_lenth==guoguan_num)array=eachArray(dan,guoguan_num);else{for(var tuoTemp=eachArray(tuo,guoguan_num-dan_lenth),cc=0;cc<tuoTemp.length;cc++)danArray.push(dan.concat(tuoTemp[cc]));array=danArray}}else array=eachArray(tuo,guoguan_num);for(var m=0,l=array.length;l>m;m++){var v=cl(array[m]);if(isShowhh)for(var a=0,aa=v.length;aa>a;a++)for(var spf_num=0,rqspf_num=0,cbf_num=0,jqs_num=0,bqc_num=0,b=0,bb=v[a].length;bb>b;b++){var rq=v[a][b];if(0==rq.box?spf_num++:4==rq.box?rqspf_num++:1==rq.box?jqs_num++:2==rq.box?cbf_num++:3==rq.box&&bqc_num++,spf_num==guoguan_num||rqspf_num==guoguan_num||jqs_num==guoguan_num||cbf_num==guoguan_num||bqc_num==guoguan_num){v[a]=[];break}}arr=arr.concat(v)}for(var j=0,jj=fs.length;jj>j;j++)for(var k=0,kk=arr.length;kk>k;k++)for(var len=eachArray(arr[k],fs[j]),n=0,nn=len.length;nn>n;n++){if(isShowhh)for(var a=0,b=0,c=0,d=0,e=0,m=0,mm=len[n].length;mm>m;m++){var ee=len[n][m];0==ee.box?a++:4==ee.box?e++:1==ee.box?b++:2==ee.box?c++:3==ee.box&&d++,(a==fs[j]||b==fs[j]||c==fs[j]||d==fs[j]||e==fs[j])&&(len[n]=[])}count+=multiplyCount(len[n]),maxPrice+=multiplyCount(len[n],"0")}}var max=2*maxPrice;return{item:count,maxWin:max}}return totalSum([],chuan,tuo)},toggleChuanBox:function(){this.is_chuan=!this.is_chuan;var chuan=this.carTotal.chuan;$("#jchhgg-gglx .car-order-type").removeClass("active");for(var i in chuan)chuan[i]&&$("#jchhgg-gglx [data-v="+i+"]").addClass("active")},toggleBei:function(flag){flag===!0?this.carTotal.bei++:(this.carTotal.bei--,this.carTotal.bei<=0&&(this.carTotal.bei=1)),this.totalCar()},selectChuan:function(ev){var target=ev.target;if($(target).hasClass("car-order-type")){var item=$(target).data("v");this.carTotal.chuan[item]?($(target).removeClass("active"),this.carTotal.chuan[item]=!1):($(target).addClass("active"),this.carTotal.chuan[item]=!0)}this.totalCar()},sendBuyData:function(){function creatBuyNumberArray(){for(var gamelist=carTotal.gl,r=[],i=0;i<gamelist.length;i++){var vs=gamelist[i],spstr=concatSP(vs.r),strArr=[];strArr.push(vs.matchHome+"vs"+vs.matchGuest),strArr.push(vs.matchName),strArr.push(vs.comityBall+":"+vs.changciStr+"-"+vs.matchNo+":["+spstr.join("#")+"]:"+vs.endTime),strArr.push(vs.stopSaleTime),strArr.push("0"),r.push(strArr.join(","))}return r.join("/")+"|0-0"}function concatSP(sp){var r=[[],[],[],[],[]];for(var i in sp)if(sp[i]===!0){var pos=SP_MAP_JSON[i].split("-");r[pos[0]].push(SP_MAP_ARRAY[pos[0]][pos[1]])}return r}function concatChuan(chuan){var re=[];for(var i in chuan)chuan[i]===!0&&re.push(CHUAN_JSON[i]);return re}var SP_MAP_ARRAY=[["胜","平","负"],["胜其他","1:0","2:0","2:1","3:0","3:1","3:2","4:0","4:1","4:2","5:0","5:1","5:2","平其他","0:0","1:1","2:2","3:3","负其他","0:1","0:2","1:2","0:3","1:3","2:3","0:4","1:4","2:4","0:5","1:5","2:5"],["0","1","2","3","4","5","6","7"],["胜胜","胜平","胜负","平胜","平平","平负","负胜","负平","负负"],["胜","平","负"]],SP_MAP_JSON={spSpf0:"4-0",spSpf1:"4-1",spSpf2:"4-2",spRqspf0:"0-0",spRqspf1:"0-1",spRqspf2:"0-2",spJq0:"2-0",spJq1:"2-1",spJq2:"2-2",spJq3:"2-3",spJq4:"2-4",spJq5:"2-5",spJq6:"2-6",spJq7:"2-7",spBf0:"1-0",spBf1:"1-1",spBf2:"1-2",spBf3:"1-3",spBf4:"1-4",spBf5:"1-5",spBf6:"1-6",spBf7:"1-7",spBf8:"1-8",spBf9:"1-9",spBf10:"1-10",spBf11:"1-11",spBf12:"1-12",spBf13:"1-13",spBf14:"1-14",spBf15:"1-15",spBf16:"1-16",spBf17:"1-17",spBf18:"1-18",spBf19:"1-19",spBf20:"1-20",spBf21:"1-21",spBf22:"1-22",spBf23:"1-23",spBf24:"1-24",spBf25:"1-25",spBf26:"1-26",spBf27:"1-27",spBf28:"1-28",spBf29:"1-29",spBf30:"1-30",spBqc0:"3-0",spBqc1:"3-1",spBqc2:"3-2",spBqc3:"3-3",spBqc4:"3-4",spBqc5:"3-5",spBqc6:"3-6",spBqc7:"3-7",spBqc8:"3-8"},CHUAN_JSON={2:"02",3:"03",4:"06",5:"11",6:"18",7:"28",8:"34"},carTotal=this.carTotal,lotoGson={gameType:"305",isStop:0,buyType:0,buyNumberArray:[{buyNumber:"纽卡斯尔喷气机vs布里斯班狮吼,澳超,1:周五001-201502065001:[#1:0#0#胜胜#胜]:20150206164000,20150206164000,0/奥厄vs莱比锡红牛,德乙,1:周五002-201502065002:[胜#2:0#0#胜平#胜]:20150207013000,20150206235900,0|0-0",typeId:"02",seleId:"02",sum:40}],issueArray:[{issue:"",multiple:1}],title:"",explain:"",secrecy:1,commision:0,commisiontype:0,splitAmount:0,buyAmount:0,floorsAmount:0,isUpload:0,qcdy:0,totalSum:40};lotoGson.buyNumberArray=[{buyNumber:creatBuyNumberArray(),typeId:"02",seleId:concatChuan(carTotal.chuan).join(","),sum:this.carTotal.pc}],lotoGson.totalSum=carTotal.pc;var d={gameType:"305",format:"ajax",needPay:"",lotoGson:{},explain:"",secrecy:1,cooperateDoubleNum:1,commisiontype:0,commision:0,splitAmount:"",buyAmount:"",floorsAmount:"",agreement2:1,isUpSum:8};d.needPay=lotoGson.totalSum,d.lotoGson=lotoGson,d.bei=carTotal.bei,jshhggPost(d,function(re){re.status&&(result.is_loading=!1,result.is_car=!1,result.is_index=!1,$("#tzsuccess").show())})},doIscroll:function(){myScroll=new IScroll("#jcwrapper",{scrollbars:!0,mouseWheel:!0,click:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0,checkDOMChanges:!0}),document.addEventListener("touchmove",function(e){e.preventDefault()},!1)},toggleDropDown:function(){this.dropdown=!this.dropdown},toggleMore:function(){this.moredown=!this.moredown},resetUserSelect:function(ev){var target=$(ev.target);return"A"==target.tagName.toUpperCase()?confirm("将清空购买选择")?!0:!1:void 0}}}),routes={"/index":function(){result.currentView="index",result.fetch_index()},"/car":function(){result.currentView="car",result.fetch_car()},"/success":function(){result.is_loading=!1,result.is_car=!1,result.is_index=!1,$("#tzsuccess").show()}};router=Router(routes),router.init("/index")}(window);